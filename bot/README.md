# Telegram Bot

Telegram-–±–æ—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ PostgreSQL (`listings`) –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è LLM –∫ –≤–Ω–µ—à–Ω–∏–º —Å–∞–π—Ç–∞–º.

## –ö–æ–º–∞–Ω–¥—ã
- `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.
- `/help` ‚Äî —Å–ø—Ä–∞–≤–∫–∞ –∏ –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤.
- `/search` ‚Äî –≤–≤–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ —Ç–µ–∫—Å—Ç–æ–º + –∫–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤.
- `/filters` ‚Äî inline-–º–µ–Ω—é —Ñ–∏–ª—å—Ç—Ä–æ–≤.
- `/recent` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–ø–∞–≥–∏–Ω–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫).
- `/favorites` ‚Äî –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–∞–≥–∏–Ω–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫).
- `/settings` ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ LLM.

## –ß—Ç–æ —É–º–µ–µ—Ç
- —Å–≤–æ–±–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (`—Ç–æ–π–æ—Ç–∞ –¥–æ 2 –º–ª–Ω`, `–±—ç—Ö—É –Ω–∞–π–¥–∏`, –∏ —Ç.–¥.);
- LLM extraction —á–µ—Ä–µ–∑ OpenAI Function Calling (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω);
- fallback-–ø–∞—Ä—Å–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ `LLM_PROVIDER=none`;
- –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏: –æ—Ç–∫—Ä—ã—Ç—å, –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã, –æ–±–Ω–æ–≤–∏—Ç—å;
- –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –ø—É—Å—Ç–æ–π –≤—ã–¥–∞—á–µ: `üîÅ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–Ω–æ–≤–∞`, `üîî –£–≤–µ–¥–æ–º–∏—Ç—å, –∫–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è`, `üß∞ –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã`;
- —Ñ–æ—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å –∏–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—ã);
- –µ—Å–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –Ω–µ—Ç ‚Äî —Å—Ç–∞–≤–∏—Ç `scrape_requests` –¥–ª—è –≤–æ—Ä–∫–µ—Ä–∞.

## –ó–∞–ø—É—Å–∫
```powershell
docker compose up -d --build bot
```

## ENV
- `TELEGRAM_BOT_TOKEN` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.
- `LLM_PROVIDER` ‚Äî `openai` –∏–ª–∏ `none`.
- `OPENAI_API_KEY`/`LLM_API_KEY` ‚Äî –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `LLM_PROVIDER=openai`.
- `OPENAI_MODEL` ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `gpt-4o-mini`.
- `BOT_MAX_PENDING_SCRAPE_REQUESTS` ‚Äî –ª–∏–º–∏—Ç pending-–∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏ —Å–∫—Ä–∞–ø–µ—Ä–∞.
